{"ast":null,"code":"import _toConsumableArray from \"/home/adamadziev/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/projects on GitHub/react-foodhub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/adamadziev/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/projects on GitHub/react-foodhub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar initialState = {\n  totalPrice: 0,\n  items: []\n};\n\nvar cart = function cart() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  // 'cart/add' - ключ, по которому будет срабатывать данный if и вызываться то что нам нужно\n  if (action.type === \"cart/add\") {\n    var findItem = state.items.find(function (item) {\n      return item.id === action.payload.id;\n    });\n\n    if (findItem) {\n      var newTotalPrice = state.totalPrice;\n      var newItems = state.items.filter(function (item) {\n        if (item.id === findItem.id) {\n          item.count++;\n          newTotalPrice += item.price;\n          return true;\n        }\n\n        return true;\n      });\n      return _objectSpread({}, state, {\n        items: newItems,\n        totalPrice: newTotalPrice\n      });\n    }\n\n    var itemWithCount = action.payload;\n    itemWithCount.count = 1;\n    return _objectSpread({}, state, {\n      items: [].concat(_toConsumableArray(state.items), [itemWithCount]),\n      totalPrice: state.totalPrice += action.payload.price\n    });\n  }\n\n  if (action.type === \"cart/decItem\") {\n    var _findItem = state.items.find(function (item) {\n      return item.id === action.payload;\n    });\n\n    var _newTotalPrice = state.totalPrice;\n\n    var _newItems = state.items.filter(function (item) {\n      if (item.id === _findItem.id) {\n        item.count--;\n        _newTotalPrice -= item.price;\n        return true;\n      }\n\n      return true;\n    });\n\n    return _objectSpread({}, state, {\n      items: _newItems,\n      totalPrice: _newTotalPrice\n    });\n  }\n\n  if (action.type === \"cart/incItem\") {\n    var _findItem2 = state.items.find(function (item) {\n      return item.id === action.payload;\n    });\n\n    var _newTotalPrice2 = state.totalPrice;\n\n    var _newItems2 = state.items.filter(function (item) {\n      if (item.id === _findItem2.id) {\n        item.count++;\n        _newTotalPrice2 += item.price;\n        return true;\n      }\n\n      return true;\n    });\n\n    return _objectSpread({}, state, {\n      items: _newItems2,\n      totalPrice: _newTotalPrice2\n    });\n  }\n\n  if (action.type === \"cart/deleteById\") {\n    var _findItem3 = state.items.find(function (item) {\n      return item.id === action.payload;\n    });\n\n    var _newTotalPrice3 = state.totalPrice - _findItem3.price * _findItem3.count;\n\n    var newCartItems = state.items.filter(function (item) {\n      return item.id !== action.payload;\n    });\n    return _objectSpread({}, state, {\n      items: newCartItems,\n      totalPrice: _newTotalPrice3\n    });\n  }\n\n  if (action.type === \"cart/clear\") {\n    return _objectSpread({}, state, {\n      items: []\n    });\n  }\n\n  return state;\n};\n\nexport default cart;","map":{"version":3,"names":["initialState","totalPrice","items","cart","state","action","type","findItem","find","item","id","payload","newTotalPrice","newItems","filter","count","price","itemWithCount","newCartItems"],"sources":["/home/adamadziev/Рабочий стол/projects on GitHub/react-foodhub/src/redux/reducers/cart.js"],"sourcesContent":["const initialState = {\n  totalPrice: 0,\n  items: [],\n};\n\nconst cart = (state = initialState, action) => {\n  // 'cart/add' - ключ, по которому будет срабатывать данный if и вызываться то что нам нужно\n  if (action.type === \"cart/add\") {\n    const findItem = state.items.find((item) => item.id === action.payload.id);\n\n    if (findItem) {\n      let newTotalPrice = state.totalPrice;\n      const newItems = state.items.filter((item) => {\n        if (item.id === findItem.id) {\n          item.count++;\n          newTotalPrice += item.price;\n          return true;\n        }\n        return true;\n      });\n\n      return {\n        ...state,\n        items: newItems,\n        totalPrice: newTotalPrice,\n      };\n    }\n\n    const itemWithCount = action.payload;\n    itemWithCount.count = 1;\n\n    return {\n      ...state,\n      items: [...state.items, itemWithCount],\n      totalPrice: (state.totalPrice += action.payload.price),\n    };\n  }\n\n  if (action.type === \"cart/decItem\") {\n    const findItem = state.items.find((item) => item.id === action.payload);\n\n    let newTotalPrice = state.totalPrice;\n    const newItems = state.items.filter((item) => {\n      if (item.id === findItem.id) {\n        item.count--;\n        newTotalPrice -= item.price;\n        return true;\n      }\n      return true;\n    });\n\n    return {\n      ...state,\n      items: newItems,\n      totalPrice: newTotalPrice,\n    };\n  }\n\n  if (action.type === \"cart/incItem\") {\n    const findItem = state.items.find((item) => item.id === action.payload);\n\n    let newTotalPrice = state.totalPrice;\n    const newItems = state.items.filter((item) => {\n      if (item.id === findItem.id) {\n        item.count++;\n        newTotalPrice += item.price;\n        return true;\n      }\n      return true;\n    });\n\n    return {\n      ...state,\n      items: newItems,\n      totalPrice: newTotalPrice,\n    };\n  }\n\n  if (action.type === \"cart/deleteById\") {\n    const findItem = state.items.find((item) => item.id === action.payload);\n\n    const newTotalPrice = state.totalPrice - findItem.price * findItem.count;\n    const newCartItems = state.items.filter(\n      (item) => item.id !== action.payload\n    );\n\n    return {\n      ...state,\n      items: newCartItems,\n      totalPrice: newTotalPrice,\n    };\n  }\n\n  if (action.type === \"cart/clear\") {\n    return {\n      ...state,\n      items: [],\n    };\n  }\n\n  return state;\n};\n\nexport default cart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}