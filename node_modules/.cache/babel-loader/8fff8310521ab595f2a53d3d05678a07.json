{"ast":null,"code":"const initialState = {\n  totalPrice: 0,\n  items: []\n};\n\nconst cart = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  // 'cart/add' - ключ, по которому будет срабатывать данный if и вызываться то что нам нужно\n  if (action.type === \"cart/add\") {\n    const findItem = state.items.find(item => item.id === action.payload.id);\n\n    if (findItem) {\n      let newTotalPrice = state.totalPrice;\n      const newItems = state.items.filter(item => {\n        if (item.id === findItem.id) {\n          item.count++;\n          newTotalPrice += item.price;\n          return true;\n        }\n\n        return true;\n      });\n      return { ...state,\n        items: newItems,\n        totalPrice: newTotalPrice\n      };\n    }\n\n    const itemWithCount = action.payload;\n    itemWithCount.count = 1;\n    return { ...state,\n      items: [...state.items, itemWithCount],\n      totalPrice: state.totalPrice += action.payload.price\n    };\n  }\n\n  if (action.type === \"cart/decItem\") {\n    const findItem = state.items.find(item => item.id === action.payload);\n    let newTotalPrice = state.totalPrice;\n    const newItems = state.items.filter(item => {\n      if (item.id === findItem.id) {\n        item.count--;\n        newTotalPrice -= item.price;\n        return true;\n      }\n\n      return true;\n    });\n    return { ...state,\n      items: newItems,\n      totalPrice: newTotalPrice\n    };\n  }\n\n  if (action.type === \"cart/incItem\") {\n    const findItem = state.items.find(item => item.id === action.payload);\n    let newTotalPrice = state.totalPrice;\n    const newItems = state.items.filter(item => {\n      if (item.id === findItem.id) {\n        item.count++;\n        newTotalPrice += item.price;\n        return true;\n      }\n\n      return true;\n    });\n    return { ...state,\n      items: newItems,\n      totalPrice: newTotalPrice\n    };\n  }\n\n  if (action.type === \"cart/deleteById\") {\n    const findItem = state.items.find(item => item.id === action.payload);\n    const newTotalPrice = state.totalPrice - findItem.price * findItem.count;\n    const newCartItems = state.items.filter(item => item.id !== action.payload);\n    return { ...state,\n      items: newCartItems,\n      totalPrice: newTotalPrice\n    };\n  }\n\n  if (action.type === \"cart/clear\") {\n    return { ...state,\n      items: []\n    };\n  }\n\n  return state;\n};\n\nexport default cart;","map":{"version":3,"names":["initialState","totalPrice","items","cart","state","action","type","findItem","find","item","id","payload","newTotalPrice","newItems","filter","count","price","itemWithCount","newCartItems"],"sources":["/home/adamadziev/Рабочий стол/react foodhub redux/src/redux/reducers/cart.js"],"sourcesContent":["const initialState = {\n  totalPrice: 0,\n  items: [],\n};\n\nconst cart = (state = initialState, action) => {\n  // 'cart/add' - ключ, по которому будет срабатывать данный if и вызываться то что нам нужно\n  if (action.type === \"cart/add\") {\n    const findItem = state.items.find((item) => item.id === action.payload.id);\n\n    if (findItem) {\n      let newTotalPrice = state.totalPrice;\n      const newItems = state.items.filter((item) => {\n        if (item.id === findItem.id) {\n          item.count++;\n          newTotalPrice += item.price;\n          return true;\n        }\n        return true;\n      });\n\n      return {\n        ...state,\n        items: newItems,\n        totalPrice: newTotalPrice,\n      };\n    }\n\n    const itemWithCount = action.payload;\n    itemWithCount.count = 1;\n\n    return {\n      ...state,\n      items: [...state.items, itemWithCount],\n      totalPrice: (state.totalPrice += action.payload.price),\n    };\n  }\n\n  if (action.type === \"cart/decItem\") {\n    const findItem = state.items.find((item) => item.id === action.payload);\n\n    let newTotalPrice = state.totalPrice;\n    const newItems = state.items.filter((item) => {\n      if (item.id === findItem.id) {\n        item.count--;\n        newTotalPrice -= item.price;\n        return true;\n      }\n      return true;\n    });\n\n    return {\n      ...state,\n      items: newItems,\n      totalPrice: newTotalPrice,\n    };\n  }\n\n  if (action.type === \"cart/incItem\") {\n    const findItem = state.items.find((item) => item.id === action.payload);\n\n    let newTotalPrice = state.totalPrice;\n    const newItems = state.items.filter((item) => {\n      if (item.id === findItem.id) {\n        item.count++;\n        newTotalPrice += item.price;\n        return true;\n      }\n      return true;\n    });\n\n    return {\n      ...state,\n      items: newItems,\n      totalPrice: newTotalPrice,\n    };\n  }\n\n  if (action.type === \"cart/deleteById\") {\n    const findItem = state.items.find((item) => item.id === action.payload);\n\n    const newTotalPrice = state.totalPrice - findItem.price * findItem.count;\n    const newCartItems = state.items.filter(\n      (item) => item.id !== action.payload\n    );\n\n    return {\n      ...state,\n      items: newCartItems,\n      totalPrice: newTotalPrice,\n    };\n  }\n\n  if (action.type === \"cart/clear\") {\n    return {\n      ...state,\n      items: [],\n    };\n  }\n\n  return state;\n};\n\nexport default cart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}